# 텍스트 상자 상호작용 원칙

이 문서는 SVG 에디터에서 텍스트 상자의 선택, 편집, 이동 동작에 대한 원칙을 정의합니다.

## 상태 정의

| 상태 | 설명 |
|------|------|
| **미선택** | 텍스트 상자가 선택되지 않은 상태 |
| **선택됨** | 상자가 선택되어 핸들이 보이는 상태 (이동/크기조절/회전 가능) |
| **편집 중** | 커서가 텍스트 내부에 있어 입력 가능한 상태 |

## 동작 매핑

| 현재 상태 | 사용자 동작 | 결과 |
|-----------|-------------|------|
| **미선택** | 클릭 | → **선택됨** |
| **미선택** | 더블클릭 | → **선택됨** + **편집 중** |
| **선택됨** | 내부 클릭 | → **편집 중** |
| **선택됨** | 더블클릭 | → **편집 중** |
| **선택됨** | 드래그 | → 상자 이동 |
| **선택됨** | 핸들 드래그 | → 크기 조절 / 회전 |
| **선택됨** | 외부 클릭 | → **미선택** |
| **편집 중** | 타이핑 | → 텍스트 입력/수정 |
| **편집 중** | 드래그 | → 텍스트 선택 (상자 이동 안 됨) |
| **편집 중** | ESC | → **선택됨** (편집 종료) |
| **편집 중** | 외부 클릭 | → **미선택** (편집 종료) |
| **편집 중** | 핸들 클릭 | → **선택됨** + 크기 조절 시작 |

## 핵심 원칙

### 1. 클릭 = 선택, 더블클릭 또는 선택 후 클릭 = 편집

- 첫 클릭은 항상 "선택"으로 해석됩니다.
- 편집 모드는 명시적 행동(더블클릭 또는 이미 선택된 상태에서 클릭)으로만 진입합니다.

### 2. 편집 중에는 상자 이동 불가

- 드래그는 텍스트 선택으로 동작합니다.
- 이동하려면 ESC로 편집 종료 후 드래그해야 합니다.

### 3. 핸들은 항상 상자 제어

- 편집 중이더라도 핸들을 클릭하면 편집 종료 후 크기 조절/회전이 시작됩니다.

### 4. ESC = 편집 종료 (선택 유지)

- 편집만 종료하고 선택 상태는 유지됩니다.
- 완전히 선택 해제하려면 외부 빈 영역을 클릭해야 합니다.

## 참고: 파워포인트 동작 방식

이 원칙은 파워포인트의 텍스트 상자 동작을 참고하여 설계되었습니다:

- **텍스트 상자 전체 선택**: 테두리 클릭 시 상자 자체가 선택됨
- **텍스트 커서(캐럿) 진입**: 한 번 더 클릭하거나 더블클릭 시 편집 모드
- **상자 전체 선택 상태에서 드래그**: 텍스트 내용은 그대로, 상자의 x,y 좌표만 이동
- **텍스트 커서 활성화 상태에서는 이동 불가**: 테두리 클릭으로 선택 상태 복귀 후 이동 가능

